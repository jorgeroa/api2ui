---
phase: 04-navigation-polish
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/URLInput.tsx
autonomous: true

must_haves:
  truths:
    - "Landing page shows URL input with example API cards below it"
    - "Clicking an example card immediately fetches the API (auto-fetch, not just populate URL)"
    - "Example cards include an OpenAPI spec example (Petstore) to showcase sidebar navigation"
    - "Example cards show title, description, and a visual type indicator"
    - "Loading state is visible on the clicked card while fetching"
  artifacts:
    - path: "src/components/URLInput.tsx"
      provides: "URL input with card-based example APIs that auto-fetch on click"
      min_lines: 80
  key_links:
    - from: "src/components/URLInput.tsx"
      to: "useAPIFetch.fetchAndInfer"
      via: "handleExampleClick calls fetchAndInfer directly"
      pattern: "fetchAndInfer.*url"
    - from: "src/components/URLInput.tsx"
      to: "appStore.setUrl"
      via: "handleExampleClick sets URL before fetching"
      pattern: "setUrl.*fetchAndInfer"
---

<objective>
Polish the landing page with card-based example APIs that auto-fetch on click for instant value demonstration.

Purpose: New users should see immediate value when they click an example. The current text links only populate the URL field and require a second click on Fetch. Cards with auto-fetch reduce friction from 2 actions to 1 and visually communicate what each example demonstrates.

Output: Enhanced URLInput.tsx with card-based examples (including an OpenAPI spec example) that trigger fetchAndInfer immediately on click.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-navigation-polish/04-RESEARCH.md

Key source files to read:
@src/components/URLInput.tsx
@src/hooks/useAPIFetch.ts
@src/store/appStore.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance URLInput with card-based examples and auto-fetch</name>
  <files>
    src/components/URLInput.tsx
  </files>
  <action>
Rewrite the examples section of URLInput.tsx to use interactive cards with auto-fetch:

**Update EXAMPLE_URLS to richer data structure:**
```typescript
const EXAMPLES = [
  {
    title: 'User Directory',
    description: 'Array of user objects with nested address and company data',
    url: 'https://jsonplaceholder.typicode.com/users',
    type: 'Array' as const,
  },
  {
    title: 'Single User',
    description: 'Detailed object view with nested fields',
    url: 'https://jsonplaceholder.typicode.com/users/1',
    type: 'Object' as const,
  },
  {
    title: 'Product Catalog',
    description: 'Paginated product list with images and ratings',
    url: 'https://dummyjson.com/products',
    type: 'Array' as const,
  },
  {
    title: 'Pet Store API',
    description: 'OpenAPI spec with multiple endpoints and tag-based navigation',
    url: 'https://petstore.swagger.io/v2/swagger.json',
    type: 'OpenAPI' as const,
  },
]
```

**Add loading state tracking:**
- Add `const [loadingExample, setLoadingExample] = useState<string | null>(null)` to track which example is currently loading
- Use the example URL as the key for loadingExample

**Update handleExampleClick to auto-fetch:**
```typescript
const handleExampleClick = async (exampleUrl: string) => {
  setUrl(exampleUrl)
  setValidationError(null)
  setLoadingExample(exampleUrl)
  try {
    await fetchAndInfer(exampleUrl)
  } finally {
    setLoadingExample(null)
  }
}
```

NOTE: `fetchAndInfer` is currently a fire-and-forget function (no return value). The store's `loading` state is already managed internally. The `setLoadingExample` tracking is for the card's own visual feedback. Since `fetchAndInfer` calls `startFetch()` which sets `loading: true`, and the form already disables on `loading`, the card loading indicator will work alongside the existing loading flow. If `fetchAndInfer` doesn't return a promise that resolves when done (check `useAPIFetch.ts`), then use the store's `loading` state to derive card loading state instead:
- Track `lastClickedExample` instead of `loadingExample`
- Card shows loading when `lastClickedExample === example.url && loading` (from appStore)

**Render example cards:**
Replace the current inline text links with a responsive card grid:

```tsx
{/* Example API cards */}
<div className="mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3">
  {EXAMPLES.map((example) => {
    const isLoading = loadingExample === example.url
    return (
      <button
        key={example.url}
        onClick={() => handleExampleClick(example.url)}
        disabled={loading}
        className="group relative p-4 border border-border rounded-lg text-left transition-all hover:border-blue-400 hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed bg-surface"
      >
        {/* Type badge */}
        <span className={`inline-block px-2 py-0.5 text-xs font-medium rounded mb-2 ${
          example.type === 'OpenAPI'
            ? 'bg-purple-100 text-purple-700'
            : example.type === 'Array'
              ? 'bg-green-100 text-green-700'
              : 'bg-blue-100 text-blue-700'
        }`}>
          {example.type}
        </span>

        {/* Title */}
        <h3 className="font-semibold text-text text-sm mb-1">{example.title}</h3>

        {/* Description */}
        <p className="text-xs text-gray-500 leading-relaxed">{example.description}</p>

        {/* Loading overlay */}
        {isLoading && (
          <div className="absolute inset-0 bg-white/70 rounded-lg flex items-center justify-center">
            <svg className="animate-spin h-5 w-5 text-blue-600" viewBox="0 0 24 24" fill="none">
              <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" />
              <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" />
            </svg>
          </div>
        )}
      </button>
    )
  })}
</div>
```

**Keep the URL input form exactly as-is** - only the examples section below it changes.

**Key details:**
- Disable all example cards while any fetch is in progress (`disabled={loading}`)
- Loading spinner overlay on the specific card being fetched
- Type badge colors: OpenAPI = purple, Array = green, Object = blue
- Cards use theme-aware classes: `bg-surface`, `text-text`, `border-border`
- Responsive grid: 1 col on mobile, 2 on sm, 4 on lg
- The "Examples:" text label is removed (cards are self-explanatory)
  </action>
  <verify>
Run `npx tsc --noEmit` to verify no type errors. Run `npm run dev` and verify:
1. Four example cards appear below URL input
2. Clicking "User Directory" card immediately fetches and renders the users table
3. Clicking "Pet Store API" card fetches and renders the OpenAPI spec (triggers sidebar in Plan 01)
4. Loading spinner appears on clicked card during fetch
5. All cards are disabled during loading
  </verify>
  <done>
URLInput shows 4 example cards with type badges, titles, and descriptions. Clicking any card auto-fetches (calls fetchAndInfer). Loading state shows spinner on the active card. Cards disabled during fetch. Pet Store example included for OpenAPI spec demonstration.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with zero errors
2. `npm run build` succeeds
3. Landing page shows 4 example cards below URL input
4. Clicking any card triggers immediate API fetch (no need to click Fetch button)
5. Cards display type badge (Array/Object/OpenAPI), title, and description
6. Loading spinner appears on the clicked card
7. All cards are disabled while a fetch is in progress
8. Pet Store OpenAPI spec card triggers spec parsing flow
</verification>

<success_criteria>
- Example cards replace inline text links with richer visual presentation
- Auto-fetch on click eliminates the extra step of clicking Fetch button
- OpenAPI spec example included to showcase multi-endpoint navigation
- Loading feedback on the specific card being loaded
- TypeScript compiles, build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/04-navigation-polish/04-02-SUMMARY.md`
</output>
